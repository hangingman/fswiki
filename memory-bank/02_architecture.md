# アーキテクチャの文書化

FSWikiアプリケーションの主要なコンポーネントとその関係性を以下に示します。

## 概要

FSWikiはPerlで書かれたWikiアプリケーションであり、`Starman` と `Plack` を利用して動作します。データストアとしてMySQL互換データベースを使用します。

## コンポーネント図

```mermaid
graph TD
    A[クライアント (Webブラウザ)] --> B(Webサーバー);
    B --> C{Perlアプリケーション};
    C --> D[データベース];

    subgraph Webサーバー
        B1(Server::Starter)
        B2(Starman)
    end

    subgraph Perlアプリケーション
        C1(Plack)
        C2(FSWiki Core)
        C3(プラグイン/テーマ)
    end

    subgraph データベース
        D1(MySQL互換DB)
    end

    B1 -- プロセス管理 --> B2;
    B2 -- PSGIインターフェース --> C1;
    C1 -- ロジック実行 --> C2;
    C2 -- データアクセス --> D1;
    C2 -- 機能拡張 --> C3;
```

## 各コンポーネントの説明

*   **クライアント (Webブラウザ):** ユーザーがFSWikiにアクセスし、コンテンツを閲覧・編集するためのインターフェースです。
*   **Webサーバー:**
    *   **Server::Starter:** アプリケーションプロセスの起動、停止、再起動を管理し、リクエストをワーカープロセスに分散します。
    *   **Starman:** PSGI (Perl Web Server Gateway Interface) アプリケーションを実行するための高速なPerl HTTPサーバーです。
*   **Perlアプリケーション:**
    *   **Plack:** PSGIアプリケーションを実行するためのフレームワークです。ミドルウェア（セッション管理、CSRF保護など）を提供し、リクエストをアプリケーション本体にルーティングします。
    *   **FSWiki Core:** Wikiのページ解析、保存、表示など、主要なロジックを実装しています。
    *   **プラグイン/テーマ:** FSWikiの機能を拡張したり、見た目をカスタマイズしたりするためのモジュールです。
*   **データベース:** Wikiのページコンテンツ、ユーザー情報、設定などの永続データを格納します。現在はMySQL互換データベース（将来的にはTiDB Cloud）を使用します。
