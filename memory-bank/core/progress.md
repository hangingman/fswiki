# **Progress**

## **実装済み (2025/05/05 現在)**
* Cloudflare Workersローカル開発環境の構築 (wranglerを使用)
* D1データベースの初期スキーマ適用 (`pages`テーブルの作成)
* **Wikiページ表示機能の基本実装:**
  * KVキャッシュからの読み取り（キャッシュがない場合のD1からの取得を含む）
  * D1からのページ本文、メタ情報、履歴の取得
  * 取得したテキストの表示（現時点ではテキスト形式）
  * 存在しないページのハンドリング (404応答)
* **WikiApplicationスタブの作成:**
  * `src/services/wikiApplication.ts` ファイルの作成
  * クラス名を `WikiApplication` に変更

## **まだ必要な実装**

* **Wikiページ表示機能:**
  * 取得したテキストのHTMLレンダリング。
  * KVキャッシュへのHTMLコンテンツの保存。
  * **WikiApplicationスタブを使用した画面表示の実装**
  * WikiApplicationスタブを既存のページ表示ハンドラ (`src/handlers/wiki.ts`) から呼び出すように修正
  * `src/handlers/wiki.ts`の`Env`インターフェースに`BUCKET`プロパティを追加し、TypeScriptエラーを解消
* **WikiApplicationのインターフェイス骨子の整理**
* **Wikiページ編集・保存機能:**
  * 編集フォーム表示ハンドラ。
  * 保存処理ハンドラ。
  * 新規ページ作成、既存ページ更新ロジック。
  * D1へのリビジョン履歴の保存。
  * KVキャッシュの更新/無効化。
  * 編集競合検出ロジック。
* **FreestyleWikiコア機能の移植/再実装:**
  * テキスト整形（FreestyleWiki独自記法、マクロ、プラグイン） - HTMLレンダリングと関連。
  * 差分表示機能。
  * 全文検索機能。
* **データストア連携の詳細:**
  * R2への添付ファイルアップロード・ダウンロード・管理。
  * D1スキーマ設計の詳細化（revisionsテーブルなど）。
* **補助機能:**
  * ユーザー認証・認可。
  * 設定管理。
  * エラーハンドリングとロギングの強化。
* **Clineによるコード変換の統合:**
  * Clineで変換したコードをWorkersプロジェクトに組み込み、動作させる。
  * 変換後のコードの手動修正とリファクタリング。

## **関連情報**

* (技術的な詳細メモは memory-bank/details/technical\_notes.md に記載予定)
* (過去の実装詳細: memory-bank/archives/... にアーカイブ予定)
